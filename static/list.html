<html>
<head>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<style>
table {
  border-collapse: collapse;
  width: 100%;
}

th, td {
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {background-color: #f2f2f2;}

input[type=button], input[type=submit], input[type=reset], button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 16px 32px;
  text-decoration: none;
  margin: 4px 2px;
  cursor: pointer;
}
</style>
</head>
<body>

<table>
    <thead><tr><th>번호</th></th><th>이름</th><th>제목</th><th>날짜</th></tr></thead>
    <tbody id="myTbody"></tbody>
</table>
<button onClick="window.location.href='http://localhost:5000/static/index.html'">글쓰기</button>

<script>
function getQueryVariable(e) {
    var t = window.location.search.substring(1);
    var n = t.split("&");
    for (var r = 0; r < n.length; r++) {
        var i = n[r].split("=");
        if (i[0] == e) {
            return i[1]
        }
    }
    return false
}

var page = getQueryVariable('page')?getQueryVariable('page'):0
var myTbodyElement = document.getElementById('myTbody');

function show(){
  axios.get(`http://localhost:5000/list?page=${page}`)
  .then(async (res)=>{
      console.log(res.data)
      if(res.data){
        var myhtml = ""
        for await (var ii of res.data){
            myhtml += "<tr onClick='window.location.href=\"http://localhost:5000/static/update.html?id="+
                       ii.id+"\"'><td>"+
                       ii.id+"</td><td>"+ii.nickname+"</td><td>"+
                       ii.title+"</td><td>"+ii.date+"</td></tr>"
        }
        myTbodyElement.innerHTML = myhtml;
      }
  })
  //console.log(myTbodyElement)

}
show(); 

</script>

</body>
</html>
